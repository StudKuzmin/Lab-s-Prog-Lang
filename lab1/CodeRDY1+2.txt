#include <iostream>
#include <string>
#include "stdio.h"
#include "fstream"
#include "ctime"
#include "math.h"

using namespace std;

int T1()//Задание 1
{
	int* m, f;

	f = rand();//Задаём неизвестное количество чисел 
	cout << "Количество чисел в файле: " << f << endl;
	m = new int[f];
	for (int i = 0; i < f; i++)
	{
		m[i] = rand() % 100;
	}

	for (int i = 0; i < f; i++)//Сортируем неизвестное количество чисел в файле
	{
		for (int i = 0; i < f - 1; i++)
		{
			if (m[i] > m[i + 1])
			{
				swap(m[i], m[i + 1]);
			}
		}
	}

	ofstream file("C:\\Users\\MubaTwo\\Desktop\\Lab1\\Все_Элементы.txt");//Запись в файл Все_Элементы
	if (!file)
	{
		cout << "Ошибка открытия файла Все_Элементы.";
	}

	else
	{
		cout << "\nФайл открыт Все_Элементы.\n";
	}

	ofstream file1("C:\\Users\\MubaTwo\\Desktop\\Lab1\\Все_Нули.txt");//Запись в файл Все_Нули
	if (!file1)
	{
		cout << "Ошибка открытия файла Все_Нули.";
	}

	else
	{
		cout << "\nФайл открыт Все_Нули.\n";
	}

	ofstream file2("C:\\Users\\MubaTwo\\Desktop\\Lab1\\Нет_Нулей.txt");//Запись в файл Нет_Нулей
	if (!file2)
	{
		cout << "Ошибка открытия файла Нет_Нулей.";
	}

	else
	{
		cout << "\nФайл открыт Нет_Нулей.\n";
	}

	for (int i = 0; i < f; i++)
	{
		if (m[i] == 0 || m[i] != 0)
		{
			file << m[i] << endl;//Записываем в файл все элементы
		}

		if (m[i] == 0)
		{
			file1 << m[i] << endl;//Записываем в файл только нулевые элементы
		}

		if (m[i] != 0)
		{
			file2 << m[i] << endl;//Записываем в файл только ненулевые элементы
		}

	}

	for (int i = 0; i < f; i++)
	{
		m[i] = 0;//Зануляем все элемента массива
	}

	ifstream file3("C:\\Users\\MubaTwo\\Desktop\\Lab1\\Все_Элементы.txt");//Чтение файла
	if (!file3)
	{
		cout << "Ошибка чтения файла Все_Элементы.";
	}

	else
	{
		cout << "\nФайл прочитан Все_Элементы.\n\n";
	}

	for (int i = 0; i < f; i++)
	{
		file3 >> m[i];//Даём значение числа из файла элементу массива
		printf("m[%d] > %d\n", i, m[i]);//Выводим элементы с 0
	}

	cout << "-------------------------------------\n";

	for (int i = 0; i < f; i++)
	{
		if (m[i] != 0)
		{
			printf("m[%d] > %d\n", i, m[i]);//Выводим отсортированные числа без 0 на экран
		}
	}

	file.close();
	file1.close();
	file2.close();
	file3.close();

	delete[] m;
	return 0;
}

int T2()//Задание 2
{
	int* m, a, b, g, k, n, size;

	cout << "Задайте интервал [a, b]:\n";
	cin >> a;
	cin >> b;

	size = fabs(a - (b + 1));//Размерность массива в связи с интервалом
	m = new int[size];

	printf("Заданный диапазон: [%d, %d]", a, b);

	for (int i = a, g = 0; i <= b; i++, g++)//Заполняем массив случайными числами из интервала
	{
		m[g] = a + rand() % ((b + 1) - a);
	}

	for (int i = 0; i < size; i++)
	{
		printf("\nm[%d] > %d\n", i, m[i]);
	}

	/*Сжатие массива*/

	cout << "\nEnter k: ";
	cin >> k;
	n = 0;


	for (int i = a, g = 0; i <= b; i++, g++)
	{
		if (m[g] > k)//Зануляем элементы массива, привышающие заданное число k
		{
			m[g] = 0;
		}
		else
		{
			printf("\nm[%d] > %d\n", g, m[g]);
			++n;
		}
	}


	for (int i = a, g = 0; i <= b; i++, g++)//Сортировка по убыванию
	{
		for (int i = a, g = 0; i < b; i++, g++)
		{
			if (m[g] > m[g + 1])
			{
				swap(m[g], m[g + 1]);
			}
		}
	}

	/*
	for (int i = 0; i < size; i++)
	{
		printf("\nСОРТИРОВКА m[%d] > %d\n", i, m[i]);// ПРОВЕРКА СОРТИРОВКИ
	}*/


	size = n;//Сокращаем размер массива
	m = (int*)realloc(m, size * sizeof * m);//Сжатие массива
	cout << "\nСжатый массив:\n";

	for (int i = 0; i < size; i++)
	{
		printf("\nm[%d] > %d\n", i, m[i]);
	}

	delete[] m;
	return 0;
}

int main()
{
	setlocale(LC_ALL, "ru");
	srand(time(NULL));

	int n, z;
	cout << "Выберите задание 1-2: ";
	cin >> n;
	if (n < 1 || n > 2)
	{
		while (n < 1 || n > 2)
		{
			cout << "Выберите задание 1 или 2: ";
			cin >> n;
		}
	}

	if (n == 1)
	{
		T1();
	}
	if (n == 2)
	{
		T2();
	}

	return 0;
}