#include <iostream>
#include <ctime>
#include <fstream>
#include <string>
#include <windows.h>

using namespace std;

struct bus
{
	int bus_number;		// Номер автобуса
	int route_number;	// Номер маршрута
	int time;			// Продолжительность 1 круга
	char* FIO;			// ФИО

};

void inf_bus(int* bs_nmbr, int* rt_nmbr, int* tm, char** F, bus* mas_bus) // Функция вывода информации об автобусах на экран
{
	ifstream read_bus_number("C:\\Users\\MubaTwo\\Desktop\\file\\lab5\\Park\\Номера автобусов.txt"); if (!read_bus_number) cout << "Ошибка открытия файла Номера автобусов.txt" << endl;
	ifstream read_route_number("C:\\Users\\MubaTwo\\Desktop\\file\\lab5\\Park\\Номера маршрутов.txt"); if (!read_route_number) cout << "Ошибка открытия файла Номера маршрутов.txt" << endl;
	ifstream read_time("C:\\Users\\MubaTwo\\Desktop\\file\\lab5\\Park\\Продолжительность.txt"); if (!read_time) cout << "Ошибка открытия файла Продолжительность.txt" << endl;
	ifstream read_FIO("C:\\Users\\MubaTwo\\Desktop\\file\\lab5\\Park\\ФИО водителей.txt"); if (!read_FIO) cout << "Ошибка открытия файла ФИО водителей.txt" << endl;
	int i = 0; int j = 0; char symbol; char str[255]; int size = _msize(F) / sizeof(int); 

	for (int i = 0; i < size; i++) // Считываем номера автобусов.txt в массив bs_nmbr
	{
		read_bus_number >> bs_nmbr[i];
	}
	
	for (int i = 0; i < size; i++) // Считываем номера маршрутов.txt в массив rt_nmbr
	{
		read_route_number >> rt_nmbr[i];
	}
	
	for (int i = 0; i < size; i++) // Считываем Продолжительность.txt в массив tm
	{
		read_time >> tm[i];
	}
	
	for (int i = 0; i < size; i++) // Считываем ФИО водителей.txt в массив F
	{
		read_FIO >> F[i];
	}


	read_bus_number.close();
	read_route_number.close();
	read_time.close();
	read_FIO.close();
	
	for (int i = 0; i < size; i++)
	{
		cout << endl << "Автобус № " << i + 1 << endl;
		mas_bus[i].bus_number = bs_nmbr[rand()%size]; cout << "Номер автобуса:\t\t\t " << mas_bus[i].bus_number << endl;
		mas_bus[i].route_number = rt_nmbr[rand()%size]; cout << "Номер Маршрута:\t\t\t " << mas_bus[i].route_number << endl;
		mas_bus[i].time = tm[rand()%size]; cout << "Продолжительность 1 круга:\t " << mas_bus[i].time << endl;
		mas_bus[i].FIO = F[rand()%size]; cout << "ФИО водителя:\t\t\t " << mas_bus[i].FIO << endl;
	}
}

int main()
{
	setlocale(LC_ALL, "ru"); srand(time(0));
	int f = 1 + rand() % 15;			// Ограничиваем количество автобусов до 15
	cout << "Размер: " << f << endl;

	bus* mas_bus = new bus [f];	// Создаём массив структур

	int* bs_nmbr = new int[f]; int* rt_nmbr = new int[f]; int* tm = new int[f]; char** F = new char*[f]; // Отдельные массивы для каждого файла
	for (int i = 0; i < f; i++)
	{
		F[i] = new char[100];
	}

	inf_bus(bs_nmbr, rt_nmbr, tm, F, mas_bus); // Функция вывода информации об автобусах на экран



	delete[] bs_nmbr;
	delete[] rt_nmbr;
	delete[] tm;
	delete[] F;
	delete[] mas_bus;

	return 0;
}